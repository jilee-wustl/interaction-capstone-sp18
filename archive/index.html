<!DOCTYPE html>
<html>
<head>
    <title> Lost in Translation_ </title>
    <link href="style.css" rel="stylesheet">
    <link rel="stylesheet" href="style_archive2.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
    <script src="loadTemplate.js"></script>
    <script type="text/javascript" src="jquery.actual.js"></script>

    <!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>

<body id="bootstrap-overrides">
    <div class="background" id="processing"></div>
    
    <div class="background" id="processingTranslation"></div>

    <div class="menu">
        <button class="menu-button" id="main-button"> Lost in Translation_ </button>
        <button class="menu-button" id="about-button"> About </button>
        <button class="menu-button" id="archive-button"> Archive </button>
    </div>
    
    <div class="page" id="landing-page">
        <div class="input-form">
        <form>
            <div class="input-container">
                <span class="my-mother-is">My mother is</span>

                <input type="text" autocomplete="off" class="inputs" id="formInput" maxlength="24">
                <input type="text" autocomplete="off" class="inputs" id="formInput2" maxlength="40">
                <input type="text" autocomplete="off" class="inputs" id="formInput3" maxlength="40">
            </div>
            
            <br>
            <input type="button" id="btnTranslate" value="Run">
        </form>            
        </div>
    </div>
    
    <div class="page1" id="archive-page">
        <div id="archive"> </div>
    </div>
    
    <div class="page2" id="about-page">
        <div id="about">about</div>
    </div>
    
    
    
    

    <script src="he/he.js"></script>
    <script src="processing.min.js"></script>

    <script type="text/html" id="template">
        <div class='post' data-id='postId'>
            <div class='insidePost' data-id='insidePostId'>
                <!--id="input-1"-->
                <div class="input" data-id="inputId">
                            <!--id="btn-t-1-1"-->
                    <div class="btn-container" data-id="btnT1">
                        <button class="btn-io"></button>
                    </div>
                            <!--id="io-1-1"-->
                    <div class="text" data-id="ioId">
                        <span class="sentence" data-content="originalInput">
                        </span>
                    </div>
                </div>
                
            <!--id="collapse-1"-->
                <div class="collapse" data-id="collapseId">
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE1">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP1" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text1">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper1">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig1" data-content="t1">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng1" data-content="t1E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang1">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE2">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP2" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text2">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper2">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig2" data-content="t2">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng2" data-content="t2E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang2">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE3">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP3" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text3">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper3">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig3" data-content="t3">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng3" data-content="t3E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang3">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE4">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP4" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text4">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper4">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig4" data-content="t4">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng4" data-content="t4E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang4">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE5">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP5" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text5">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper5">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig5" data-content="t5">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng5" data-content="t5E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang5">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE6">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP6" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text6">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper6">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig6" data-content="t6">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng6" data-content="t6E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang6">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE7">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP7" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text7">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper7">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig7" data-content="t7">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng7" data-content="t7E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang7">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE8">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP8" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text8">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper8">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig8" data-content="t8">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng8" data-content="t8E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang8">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE9">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP9" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text9">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper9">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig9" data-content="t9">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng9" data-content="t9E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang9">
                            </div>
                        </div>
                    </div>
                    
                    <div class="eachTrans">
                            <!--id="btn-e-1-1"-->
                        <div class="btn-container" data-id="btnE10">
                            <!--id="btn-p-1-1" class="btn-btw-1" value="1"-->
                            <button data-id="btnP10" data-class="btnBtw" class="btn-btw" data-value="btnVal"></button>
                        </div>
                        
                        <!--id="text-1-1"-->
                        <div class="text" data-id="text10">
                            <!--id="1-1"-->
                            <div class= "txtWrapper" data-id="wrapper10">
                                            <!--id="1-1-orig"-->
                                <span class="sentence orig" data-id="orig10" data-content="t10">
                                </span>
                                            <!--id="1-1-eng"-->
                                <span class="sentence eng" data-id="eng10" data-content="t10E">
                                </span>
                            </div>
                            <!--English &ndash;&nbsp;<span id="lang-1-1"> Spanish</span>-->
                            <div class="lang" data-content="lang10">
                            </div>
                        </div>
                    </div>
                </div>
                
                <!--id="output-1"-->
                <div class="output" data-id="output">
                            <!--id="btn-t-1-2"-->
                    <div class="btn-container" data-id="btnT2">
                        <button class="btn-io"></button>
                    </div>
                    <!--id="io-1-2"-->
                    <div class="text" data-id="ioId2">
                        <span class="sentence" data-content="finalOutput">
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="btn-container btn-m" data-id="btnM">
            </div>
        </div>
    </script>

    <script>
        var processingString = "";

        $(document).ready(function(){
            var $newCanv = $("<canvas/>").attr("id", "mycanvas");  // adds the id 

            $("#processing").append($newCanv);
            Processing.loadSketchFromSources('mycanvas', ['background_working/background_working.pde']);
            
            $("#formInput").keyup(function () {
                if ((this.value.length+20) > this.maxLength) {
                    $("#formInput2").fadeIn(2000);
                }
            });
            
            $("#formInput2").keyup(function () {
                var key = event.keyCode || event.charCode;

                if ((this.value.length+10) > this.maxLength) {
                    $("#formInput3").fadeIn(2000);
                }
                
                if( key == 8 || key == 46 )
                    {
                    if (this.value.length === 0) {
                        $(this).prev('.inputs').focus();
                    }
                }
            });
            
            $(".inputs").keyup(function () {
                var key = event.keyCode || event.charCode;
                
                if (this.value.length == this.maxLength) {  
                  var $next = $(this).next('.inputs');
                  if ($next.length)
                      $(this).next('.inputs').focus();
                  else
                      $(this).focus();
                }
                
                if( key == 8 || key == 46 )
                    {
                    if (this.value.length === 0) {
                        $(this).prev('.inputs').focus();
                    }
                }
            });
            
            $('.inputs').keyup(function () {
              var key = event.keyCode || event.charCode;
              if((this.value.length == this.maxLength) && key != 32) {
                var $next = $(this).next('.inputs');
                if ($next.length) {
                    $(this).next('.inputs').focus();
                }
                else {
                    $(this).focus();
                }
              } 
            });
            
            $('#main-button').click(function() {
                if ( $("#landing-page").css('display') == 'none' ){                    
                    if($("#processingTranslation").css('display') == 'block' ){
                        $("#processingTranslation").fadeOut(2000);
                    }
                    if($("#about-page").css('display') == 'block' ){
                        $("#about-page").fadeOut(2000);
                    }
                    if($("#archive-page").css('display') == 'block' ){
                        $("#archive-page").fadeOut(2000);
                    }
                    
                    $("#landing-page").fadeIn(2000);
                }
            });
             
            
            $('#about-button').click(function() {
                if ( $("#about-page").css('display') == 'none' ){
                    if($("#archive-page").css('display') == 'block' ){
                        $("#archive-page").fadeOut(2000);
                    }
                    if($("#processingTranslation").css('display') == 'block' ){
                        $("#processingTranslation").fadeOut(2000);
                    }
                    if($("#landing-page").css('display') == 'block' || ($("#landing-page").css('display') == 'flex')){
                        $("#landing-page").fadeOut(2000);
                    }
    
                    $("#about-page").fadeIn(2000);
                }
            });
            
            $('#archive-button').click(function() {
                if ( $("#archive-page").css('display') == 'none' ){                
                    if($("#landing-page").css('display') == 'block' || ($("#landing-page").css('display') == 'flex')){
                        $("#landing-page").fadeOut(2000);
                    }
                    if($("#processingTranslation").css('display') == 'block' ){
                        $("#processingTranslation").fadeOut(2000);
                    }
                    if($("#about-page").css('display') == 'block' ){
                        $("#about-page").fadeOut(2000);
                    }
                    loadDatabase();
                    $("#archive-page").fadeIn(2000);
                }
            });
        
        var url;
        
        var languages = ["EN","ES","FR","IT","SV","EL","SW","RU","TH","JA","ZH","EN"];

        var currentLang;
        var nextLang;
        var currentLangEng;
        var nextLangEng;
        var translateInput;
        var result = [];
        var resultEng = [];
        var translationCount = 0;
        var translationCountEng = 0;
        var userInput;
        var combinedInput;
        var finished = false;
        var postNum = 0;
        
        
        
        
        
        
        
        
        
        
        
        /* translate */
        function translate() {
            $(".input-form").delay(100).fadeOut("slow");

            if (translationCount < 11) {
                if (translationCount === 0){
                    combinedInput = "My mother is " + $("#formInput").val() + $("#formInput2").val() + $("#formInput3").val();
                    
                    var stringLength = combinedInput.length; 
                    var lastChar = combinedInput.charAt(stringLength - 1);
                    
                    if(lastChar !== ".") {
                        combinedInput = combinedInput + ".";
                    }
                    
                    translateInput = encodeURIComponent(combinedInput);
                    processingString = he.decode(combinedInput);
                }
    
                else {
                    console.log("input: " + result[translationCount-1]);
                    translateInput = encodeURIComponent(result[translationCount-1]);
                }
                
                currentLang = languages[translationCount];
                nextLang = languages[(translationCount + 1)];
                
                //console.log ("tCount: " + translationCount);
                //console.log ("current language: " + currentLang);
                //console.log ("next language: " + nextLang);
                url = "https://translation.googleapis.com/language/translate/v2?key=AIzaSyDR3NPgTSVCs633RyvRG94_awHZuuqGC4A";
                url += "&source=" + currentLang; 
                url += "&target=" + nextLang;
                url += "&q=" + translateInput;
                
                console.log(url);

                $.get(url, function (data, status) {

                if(status == "success") {
                    
                    var done = decodeURIComponent(data.data.translations[0].translatedText);
                    
                    //***** decode ******
                    done = he.decode(done);
                    
                    var stringLength = done.length; 
                    var lastCharOne = done.charAt(stringLength - 1);
                    
                    if((lastCharOne !== ".") && (result.length < 8)) {
                        done = done + ".";
                    }
                    
                    processingString += "/" + done;

                    result.push(done);
                    console.log("done: " + done);

                    //console.log("result " + translationCount +": " + result[translationCount]);
                    url = "";
                    translationCount++;
                    translate();
                    if (translationCount == 11) {
                        translateEng();
                    }
                }
                });
            }
        }
        
        function translateEng() {
            if (translationCountEng < 10) {
                console.log("eng count " + translationCountEng);
                translateInput = encodeURIComponent(result[translationCountEng]);
                currentLangEng = languages[translationCountEng+1];
                nextLangEng = "EN";
                
                console.log ("tCount: " + translationCountEng);

                console.log ("current language: " + currentLangEng);
                console.log ("next language: " + nextLangEng);
                url = "https://translation.googleapis.com/language/translate/v2?key=AIzaSyDR3NPgTSVCs633RyvRG94_awHZuuqGC4A";
                url += "&source=" + currentLangEng; 
                url += "&target=" + nextLangEng;
                url += "&q=" + translateInput;
                
                //console.log(url);
                  
                $.get(url, function (data, status) {
                $("#resultEng").append(decodeURIComponent(translateInput) + "<br>");

                $("#resultEng").append("to English: " + data.data.translations[0].translatedText + "<br>");
                if(status == "success") {
                    var done = decodeURIComponent(data.data.translations[0].translatedText);
                    
                    //***** decode ******
                    done = he.decode(done);
                    
                    var stringLength = done.length; 
                    var lastCharTwo = done.charAt(stringLength - 1);
                    
                    if(lastCharTwo !== ".") {
                        done = done + ".";
                    }
                    
                    resultEng.push(done);
                    //console.log("done: " + done);
                    //console.log("result " + translationCount +": " + resultEng[translationCountEng]);
                    url = "";
                    translationCountEng++;
                    translateEng();
                    if (translationCountEng === 10){
                        writeNewPost();
                        console.log("processing: " + processingString);
                        //$("#mycanvas").delay(3500).fadeOut("slow");

                        
                        var $newCanv = $("<canvas/>").attr("id", "translation");  // adds the id 
                        
                        $("#processingTranslation").append($newCanv);
                        Processing.loadSketchFromSources('translation', ['translation/translation.pde']);
                        
                        $("#translation").delay(3000).fadeIn(1500);
                        setTimeout(loadDatabase, 3000);
                    }
                }
                });
            }
        }
    
    
    
    
    
    /* initializing firebase */
        
        var config = {
            apiKey: "AIzaSyBCwLAV6RqYEPX766evjDD4SxrVyRlOY_0",
            authDomain: "lost-in-translation-68ffc.firebaseapp.com",
            databaseURL: "https://lost-in-translation-68ffc.firebaseio.com",
            projectId: "lost-in-translation-68ffc",
            storageBucket: "lost-in-translation-68ffc.appspot.com",
            messagingSenderId: "269344435801"
        };
        firebase.initializeApp(config);
        
        
        function writeNewPost() {
            // A post entry.
            console.log(combinedInput);

            var postData = {
                A_originalInput: combinedInput,
                B_Spanish: result[0],
                C_SpanishToEn: resultEng[0],
                D_French: result[1],
                E_FrenchToEn: resultEng[1],
                F_Italian: result[2],
                G_ItalianToEn: resultEng[2],
                H_Swedish: result[3],
                I_SwedishToEn: resultEng[3],
                J_Greek: result[4],
                K_GreekToEn: resultEng[4],
                L_Swahilli: result[5],
                M_SwahilliToEn: resultEng[5],
                N_Russian: result[6],
                O_RussianToEn: resultEng[6],
                P_Thai: result[7],
                Q_ThaiToEn: resultEng[7],
                R_Japanese: result[8],
                S_JapaneseToEn: resultEng[8],
                T_Chinese: result[9],
                U_ChineseToEn: resultEng[9],
                V_finalOutput: result[10]   
            };
        
            // Get a key for a new Post.
            var newPostKey = firebase.database().ref().child('translations').push().key;
          
            // Write the new post's data simultaneously in the posts list and the user's post list.
            var updates = {};
            updates['/translations/' + newPostKey] = postData;
          
            return firebase.database().ref().update(updates);
        }
        
        var ref = firebase.database().ref('/translations/');

        var final = "";
        
        function displayArrayObjects(arrayObjects) {
            var len = arrayObjects.length;
            postNum = arrayObjects.length;
            
            for (var i = (len-1); i >= 0; i--) {
                var x = i+1;
                
                $( "#archive" ).append( "<div id='translation-" + x + "'></div>" );
                
                var myObject = arrayObjects[i];
                
                var idPost = "post-"+x;
                var insideIdPost = "insidePost-" + x;
                var translateId = "#translation-" + x;
                $(translateId).loadTemplate($('#template'),
                {
                    postId: idPost,
                    insidePostId: insideIdPost,
                    inputId: "input-"+x,
                    btnT1: "btn-t-"+x+"-1",
                    ioId: "io-"+x+"-1",
                    originalInput: myObject.A_originalInput,
                    collapseId: "collapse-"+x,
                    
                    btnE1: "btn-e-"+x+"-1",
                    btnP1: "btn-p"+x+"-1",
                    btnBtw: "btn-btw-"+x,
                    btnVal: x,
                    text1: "text-"+x+"-1",
                    wrapper1: x+"-1",
                    orig1: x+"-1-orig",
                    t1: myObject.B_Spanish,
                    eng1: x+"-1-eng",
                    t1E: myObject.C_SpanishToEn,
                    lang1: "English &ndash;&nbsp;<span id='lang-"+x+"-1'> Spanish</span>",            
                    
                    btnE2: "btn-e-"+x+"-2",
                    btnP2: "btn-p"+x+"-2",
                    text2: "text-"+x+"-2",
                    wrapper2: x+"-2",
                    orig2: x+"-2-orig",
                    t2: myObject.D_French,
                    eng2: x+"-2-eng",
                    t2E: myObject.E_FrenchToEn,
                    lang2: "Spanish &ndash;&nbsp;<span id='lang-"+x+"-2'> French</span>",
                    
                    btnE3: "btn-e-"+x+"-3",
                    btnP3: "btn-p"+x+"-3",
                    text3: "text-"+x+"-3",
                    wrapper3: x+"-3",
                    orig3: x+"-3-orig",
                    t3: myObject.F_Italian,
                    eng3: x+"-3-eng",
                    t3E: myObject.G_ItalianToEn,
                    lang3: "French &ndash;&nbsp;<span id='lang-"+x+"-3'> Italian</span>",
                    
                    btnE4: "btn-e-"+x+"-4",
                    btnP4: "btn-p"+x+"-4",
                    text4: "text-"+x+"-4",
                    wrapper4: x+"-4",
                    orig4: x+"-4-orig",
                    t4: myObject.H_Greek,
                    eng4: x+"-4-eng",
                    t4E: myObject.I_GreekToEn,
                    lang4: "Italian &ndash;&nbsp;<span id='lang-"+x+"-4'> Swedish</span>",
                    
                    btnE5: "btn-e-"+x+"-5",
                    btnP5: "btn-p"+x+"-5",
                    text5: "text-"+x+"-5",
                    wrapper5: x+"-5",
                    orig5: x+"-5-orig",
                    t5: myObject.J_Swedish,
                    eng5: x+"-5-eng",
                    t5E: myObject.K_SwedishToEn,
                    lang5: "Swedish &ndash;&nbsp;<span id='lang-"+x+"-5'> Greek</span>",
                    
                    btnE6: "btn-e-"+x+"-6",
                    btnP6: "btn-p"+x+"-6",
                    text6: "text-"+x+"-6",
                    wrapper6: x+"-6",
                    orig6: x+"-6-orig",
                    t6: myObject.L_Swahilli,
                    eng6: x+"-6-eng",
                    t6E: myObject.M_SwahilliToEn,
                    lang6: "Greek &ndash;&nbsp;<span id='lang-"+x+"-6'> Swahilli</span>",
                    
                    btnE7: "btn-e-"+x+"-7",
                    btnP7: "btn-p"+x+"-7",
                    text7: "text-"+x+"-7",
                    wrapper7: x+"-7",
                    orig7: x+"-7-orig",
                    t7: myObject.N_Russian,
                    eng7: x+"-7-eng",
                    t7E: myObject.O_RussianToEn,
                    lang7: "Swahilli &ndash;&nbsp;<span id='lang-"+x+"-7'> Russian</span>",
                    
                    btnE8: "btn-e-"+x+"-8",
                    btnP8: "btn-p"+x+"-8",
                    text8: "text-"+x+"-8",
                    wrapper8: x+"-8",
                    orig8: x+"-8-orig",
                    t8: myObject.P_Thai,
                    eng8: x+"-8-eng",
                    t8E: myObject.Q_ThaiToEn,
                    lang8: "Russian &ndash;&nbsp;<span id='lang-"+x+"-8'> Thai</span>",
                    
                    btnE9: "btn-e-"+x+"-9",
                    btnP9: "btn-p"+x+"-9",
                    text9: "text-"+x+"-9",
                    wrapper9: x+"-9",
                    orig9: x+"-9-orig",
                    t9: myObject.R_Japanese,
                    eng9: x+"-9-eng",
                    t9E: myObject.S_JapaneseToEn,
                    lang9: "Thai &ndash;&nbsp;<span id='lang-"+x+"-9'> Japanese</span>",
                    
                    btnE10: "btn-e-"+x+"-10",
                    btnP10: "btn-p"+x+"-10",
                    text10: "text-"+x+"-10",
                    wrapper10: x+"-10",
                    orig10: x+"-10-orig",
                    t10: myObject.T_Chinese,
                    eng10: x+"-10-eng",
                    t10E: myObject.U_ChineseToEn,
                    lang10: "Japanese &ndash;&nbsp;<span id='lang-"+x+"-10'> Chinese</span>",
                    
                    output: "output-"+x,
                    btnT2: "btn-t-"+x+"-2",
                    ioId2: "io-"+x+"-2",
                    finalOutput: myObject.V_finalOutput,
                    btnM: "btn-m-"+x
                });
                
                $( "#btn-m-"+x ).append("<button id='btn-o-"+x+"' value = '"+x+"' class='btn-o' type='button' data-toggle='collapse' data-target='#collapse-"+x+"' aria-expanded='false' aria-controls='collapse-"+x+"'></button>");
                
            }
            doneLoadingDatabase();    
        
        }
        
        function loadDatabase() {
            
        var keys = [];
            ref.once('value',function(snap) {
                snap.forEach(function(item) {
                    var itemVal = item.val();
                    keys.push(itemVal);
                    var str = JSON.stringify(itemVal);
                    final += str;
                });
                displayArrayObjects(keys);	
            });
        }
        
        //hover effect for each language
        $("body").on('mouseover', '.txtWrapper', function(e) {
            console.log("mouse enter");
            var wrapperId = this.id;

            var eng = '#' + wrapperId + '-eng';
            var orig = '#' + wrapperId + '-orig';
                
            var boldSpan = '#lang-' + wrapperId;
                                
            $(orig).show();
            $(eng).hide();
            $(boldSpan).css('font-weight', 500);             
        });
        
        $("body").on('mouseout', '.txtWrapper', function(e) {
             var wrapperId = this.id;

            var eng = '#' + wrapperId + '-eng';
            var orig = '#' + wrapperId + '-orig';
            
            var boldSpan = '#lang-' + wrapperId;

            $(orig).hide();
            $(eng).show();
            $(boldSpan).css('font-weight', 300);     
        });
        
        $("body").on('click', '.btn-o', function(e) {
            var btnValue = this.value;
            var btnName = '.btn-btw-' + btnValue;
            var btnDotName = '#btn-m-' + btnValue;

                $(this).fadeOut();
                $(btnDotName).fadeOut();

                $(btnName).hide();
                                
                setTimeout(function() {
                    calculate(btnValue);
                }, 1100);
                
                setTimeout(function() {
                    showBtn(btnValue);
                }, 1100);   
        });
        
        $("body").on('click', '.btn-btw', function() {
            var btnValue = this.value;
                var collapseName = '#collapse-' + btnValue;
                var btnMidName = '#btn-m-' + btnValue;
                
                $(collapseName).collapse('hide');
                $(btnMidName).hide();

                setTimeout(function() {
                    calculate(btnValue);
                }, 1100);
                
                setTimeout(function() {
                    showMidBtn(btnValue);
                }, 1100);
        });
    
            
            
            function calculate(val) {
                var postHeight = $('#insidePost-'+val).actual('height');
                
                console.log(postHeight);
                
                var btnName = '#btn-m-'+val;
                
                $(btnName).css('min-height', postHeight+'px');
                                
                for (var x = 1; x <=10; x++){
                    var divName = '#text-' + val + '-' + x;
                    var btnMidName = '#btn-e-' + val + '-' + x;
                    var individualHeight = $(divName).actual('height');
                    $(btnMidName).css('min-height', individualHeight+'px');
                }
                
                $(btnName).fadeIn(1200);
            }
            
            
            function showMidBtn(val) {
                var name = '#btn-o-' + val;
                $(name).fadeIn(1000);
            }
            
            function showBtn(val) {
                var name = '.btn-btw-' + val;
                $(name).fadeIn();
            }
        
        /* detects enter pressed */
        function enterPressed() {
            $(".inputs").on("keydown",function search(e) {
                if(e.keyCode == 13) {
                    translate();
                }
            });
        }
        
        /* functions */
        enterPressed();
        
        $("#btnTranslate").click(function () {
            userInput = "My mother is " + $("#formInput").val() + $("#formInput2").val() + $("#formInput3").val();
            translate();
        });
        
         function doneLoadingDatabase() {
            console.log(postNum);
            // for each post
            for (var a = 1; a <= postNum; a++) {
                
                //placing button for input & output 
                for (var b = 1; b < 3; b++) {
                    var textDivName = '#io-' + a + '-' + b;
                    var btnDivName = '#btn-t-' + a + '-' + b;
                    var divHeight = $(textDivName).actual('height');
                    $(btnDivName).css('min-height', divHeight+'px');
                }
                
                //placing button in the middle of input & output
                var postHeight = $('#insidePost-' + a).actual('height');
                $('#btn-m-'+a).css('min-height', postHeight);

            }
            $("#archive").fadeIn(1000);
           }
        
        
        
        
        });
    </script>
    
</body>
</html>